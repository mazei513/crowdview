<head>
  <title>crowdview</title>

	<script src='client/flipclock.js'></script>
	<script type="text/javascript">
		var clock;
		
		$(document).ready(function() {
			var clock;

			clock = $('.clock').FlipClock({
		        clockFace: 'DailyCounter',
		        autoStart: false,
		        callbacks: {
		        	stop: function() {
		        		$('.message').html('The clock has stopped!')
		        	}
		        }
		    });
				    
		    clock.setTime(220880);
		    clock.setCountdown(true);
		    clock.start();

		});
	</script>

	<script>
		function startTimer(duration, display) {
			var timer = duration, hours, minutes, seconds;
			console.log(timer);
			setInterval(function () {
			    hours = parseInt(timer / 60 / 60, 10)
			    minutes = parseInt(timer / 60 % 60, 10)
			    seconds = parseInt(timer % 60, 10);

			    hours = hours < 10 ? "0" + hours : hours;
			    minutes = minutes < 10 ? "0" + minutes : minutes;
			    seconds = seconds < 10 ? "0" + seconds : seconds;
			    display.empty();
			    display.text(hours + " hours " + minutes + " minutes " + seconds + " seconds");

			    if (--timer < 0) {
			        timer = duration;
			    }
			    var progress = timer * 100 / duration;
			    var progressDiv = "<div class='progress-bar progress-bar-striped active' role='progressbar' aria-valuenow='100' aria-valuemin='0' aria-valuemax='100' style='width: " + progress + "%'>"
		
			    $(".progress").empty().append(progressDiv);
			}, 1000);
		}

		jQuery(function ($) {
			var fiveHours = 60 * 5,
		    	display = $('#time');
			startTimer(fiveHours, display);
		});
	</script>
</head>


<body>
<div class='container'>
  {{> countdown}}
</div>
    
</body>

<template name='countdown'>
	<div id="clockContainer">
		<div class="clock" style="margin:2em;"></div>
		<div class="message"></div>
	</div>
	<span id="time">00 hours 05 minutes 00 seconds</span> left!
	<div class="progress">
		<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
		</div>
	</div>
</template>
